{% extends "main_layout.html" %}
{% block content %}
<div class="patient-section">
    <h2>Edit Patient Information</h2>
    
    <div class="edit-patient-form">
        <form method="POST">
            <div class="form-row">
                <div class="form-group">
                    <label>Gender:</label>
                    <select name="gender" required>
                        <option value="Male" {% if patient.gender == "Male" %}selected{% endif %}>Male</option>
                        <option value="Female" {% if patient.gender == "Female" %}selected{% endif %}>Female</option>
                        <option value="Other" {% if patient.gender == "Other" %}selected{% endif %}>Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Age:</label>
                    <input type="number" name="age" value="{{ patient.age }}" min="0" max="120" step="0.1" required>
                </div>
                <div class="form-group">
                    <label>Hypertension:</label>
                    <select name="hypertension" required>
                        <option value="0" {% if patient.hypertension == 0 %}selected{% endif %}>No</option>
                        <option value="1" {% if patient.hypertension == 1 %}selected{% endif %}>Yes</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Ever Married:</label>
                    <select name="ever_married" required>
                        <option value="No" {% if patient.ever_married == "No" %}selected{% endif %}>No</option>
                        <option value="Yes" {% if patient.ever_married == "Yes" %}selected{% endif %}>Yes</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Work Type:</label>
                    <select name="work_type" required>
                        <option value="Private" {% if patient.work_type == "Private" %}selected{% endif %}>Private</option>
                        <option value="Self-employed" {% if patient.work_type == "Self-employed" %}selected{% endif %}>Self-employed</option>
                        <option value="Govt_job" {% if patient.work_type == "Govt_job" %}selected{% endif %}>Government Job</option>
                        <option value="children" {% if patient.work_type == "children" %}selected{% endif %}>Children</option>
                        <option value="Never_worked" {% if patient.work_type == "Never_worked" %}selected{% endif %}>Never worked</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Residence Type:</label>
                    <select name="residence_type" required>
                        <option value="Rural" {% if patient.residence_type == "Rural" %}selected{% endif %}>Rural</option>
                        <option value="Urban" {% if patient.residence_type == "Urban" %}selected{% endif %}>Urban</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Glucose Level:</label>
                    <input type="number" name="avg_glucose_level" value="{{ patient.avg_glucose_level }}" step="0.01" min="0" max="500" required>
                </div>
                <div class="form-group">
                    <label>BMI:</label>
                    <input type="number" name="bmi" value="{{ patient.bmi }}" step="0.01" min="10" max="50" required>
                </div>
                <div class="form-group">
                    <label>Smoking Status:</label>
                    <select name="smoking_status" required>
                        <option value="never smoked" {% if patient.smoking_status == "never smoked" %}selected{% endif %}>Never Smoked</option>
                        <option value="formerly smoked" {% if patient.smoking_status == "formerly smoked" %}selected{% endif %}>Formerly Smoked</option>
                        <option value="smokes" {% if patient.smoking_status == "smokes" %}selected{% endif %}>Smokes</option>
                        <option value="Unknown" {% if patient.smoking_status == "Unknown" %}selected{% endif %}>Unknown</option>
                    </select>
                </div>
            </div>

            <div class="button-group">
                <button type="submit" class="btn">Save Changes</button>
                <a href="{{ url_for('patient_info', patient_id=patient._id) }}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>

<style>
.patient-section {
    padding: 20px;
}
.edit-patient-form {
    background-color: rgba(255, 255, 255, 0.9);
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
}
.form-row {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}
.form-group {
    flex: 1;
}
.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #456789;
}
.form-group input,
.form-group select {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
    background-color: white;
}
.button-group {
    margin-top: 20px;
    text-align: center;
}
.btn {
    margin: 0 10px;
}
.btn-secondary {
    background-color: #6c757d;
}
.btn-secondary:hover {
    background-color: #5a6268;
}
</style>
{% endblock %}